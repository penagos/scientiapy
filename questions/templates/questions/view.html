{% extends "base.html" %}
{% load markdown %}
{% block content %}
<div class="container mt-4" id="content">
    <div class="row">
        <div class="col-lg-9">
            <div class="row">
                <div class="col-lg-12">
                    <h2>{{ question.title }}</h2>
                    <hr>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce facilisis justo eu ante dictum fermentum. Morbi tempor pellentesque nisi faucibus euismod. Nunc tempor imperdiet diam, sed efficitur purus faucibus sit amet. Vivamus egestas dolor vel felis pulvinar accumsan. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Morbi urna tellus, consequat ac luctus sed, vestibulum in tellus. Sed sit amet ultricies sem. Aliquam luctus sit amet ipsum tincidunt dictum. Duis enim tortor, euismod sit amet ante in, lobortis tempus lectus. 
                    </p>
                    <span class="badge badge-primary">Primary</span>
                    <span class="badge badge-primary">Primary</span>
                </div>
            </div>

            <div class="row mb-2">
                <div class="col-lg-12">
                    <ul class="nav nav-tabs justify-content-end">
                        <li class="nav-item">
                            <a class="nav-link active" href="#">Votes</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">New</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Old</a>
                        </li>
                    </ul>
                </div>
            </div>

            <div class="tab-content">
                <h4>Answers</h4>
                {% for post in posts %}
                    <div class="row mb-4">
                        <div class="col-lg-1">
                            <ul class="list-group">
                                <li class="list-group-item bg-success text-white question-stat">5</li>
                                <li class="list-group-item question-stat">8</li>
                            </ul>
                        </div>
                        <div class="col-lg-11">
                            <div class="post">
                                <p class="text-dark">{{ post.body|markdownify|safe }}</p>
                                <hr>
                                <p class="small text-muted text-right">Posted on {{ post.published_date }} by <a href="{% url 'user:profile' post.author.id %}">{{ post.author.username }}</a></p>
                            </div>
                            <div class="comments">
                                <div class="comment">
                                    <p class="small">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum vulputate ac massa a rutrum. Nam sodales rutrum turpis, vel eleifend mi tempor in. In hac habitasse platea dictumst. Curabitur vitae sagittis felis. Nam orci ex, accumsan eu ornare at, tristique pellentesque mi. Nulla eu sollicitudin nisl. <span class="text-black-50">Posted by <a href="#">User</a> 50 minutes ago</span></p>
                                    <hr>
                                </div>
                                <div class="comment">
                                    <p class="small">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum vulputate ac massa a rutrum. Nam sodales rutrum turpis, vel eleifend mi tempor in. In hac habitasse platea dictumst. Curabitur vitae sagittis felis. Nam orci ex, accumsan eu ornare at, tristique pellentesque mi. Nulla eu sollicitudin nisl. <span class="text-black-50">Posted by <a href="#">User</a> 50 minutes ago</span></p>
                                    <hr>
                                </div>
                                <div class="comment-poster" id="comment{{ post.id }}">
                                    {% if user.is_authenticated %}
                                        <p class="small"><a href="#" class="commentPoster" data-target="comment{{ post.id }}">Post comment</a></p>
                                    {% else %}
                                        <p class="small">Please <a data-fancybox data-type="ajax" data-src="{% url 'user:login' %}" href="javascript:;">login</a> to post a comment.</p>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                {% endfor %}

                <div class="row mb-4">
                    <div class="col-lg-12">
                        <div class="card text-center load-more">
                            <div class="card-header">
                               <a href="" class="text-decoration-none">Load 42 more answers</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <h4 class="mb-3">Post an Answer</h4>
                    {% if user.is_authenticated %}
                    <form method="POST" action="{% url 'questions:save' question.id %}">
                        {% csrf_token %}
                        <textarea name="post" id="postEditor"></textarea>
                        <div class="text-right">
                            <button type="submit" class="btn btn-primary">Post</button>
                        </div>
                        <script>
                            $(document).ready(function() {
                                var easyMDE = new EasyMDE({element: document.getElementById('postEditor')});
                            });
                        </script>
                    </form>
                    {% else %}
                    <div class="alert alert-primary" role="alert">
                        Please <a data-fancybox data-type="ajax" data-src="{% url 'user:login' %}" href="javascript:;">login</a> to post an answer. <a href="{% url 'user:join' %}">Need an account</a>?
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>

        <div class="col-lg-3">
            <div class="mb-4">
                <h6 class="font-weight-bold">Recent Posts</h6>
                <ul class="sidelist">
                    <li>Etiam justo ipsum, ultrices id nibh in</li>
                    <li>Etiam justo ipsum, ultrices id nibh in</li>
                    <li>Etiam justo ipsum, ultrices id nibh in</li>
                    <li>Etiam justo ipsum, ultrices id nibh in</li>
                    <li>Etiam justo ipsum, ultrices id nibh in</li>
                    <li>Etiam justo ipsum, ultrices id nibh in</li>
                    <li>Etiam justo ipsum, ultrices id nibh in</li>
                    <li>Etiam justo ipsum, ultrices id nibh in</li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}